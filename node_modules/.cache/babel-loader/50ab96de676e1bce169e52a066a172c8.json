{"ast":null,"code":"import { Html5QrcodeConstants, Html5QrcodeScanType, Html5QrcodeErrorFactory, BaseLoggger, isNullOrUndefined, clip } from \"./core\";\nimport { Html5Qrcode } from \"./html5-qrcode\";\nimport { Html5QrcodeScannerStrings } from \"./strings\";\nimport { ASSET_FILE_SCAN, ASSET_CAMERA_SCAN } from \"./image-assets\";\nimport { PersistedDataManager } from \"./storage\";\nimport { LibraryInfoContainer } from \"./ui\";\nimport { CameraPermissions } from \"./camera/permissions\";\nimport { ScanTypeSelector } from \"./ui/scanner/scan-type-selector\";\nimport { TorchButton } from \"./ui/scanner/torch-button\";\nimport { FileSelectionUi } from \"./ui/scanner/file-selection-ui\";\nimport { BaseUiElementFactory, PublicUiElementIdAndClasses } from \"./ui/scanner/base\";\nimport { CameraSelectionUi } from \"./ui/scanner/camera-selection-ui\";\nimport { CameraZoomUi } from \"./ui/scanner/camera-zoom-ui\";\nvar Html5QrcodeScannerStatus;\n(function (Html5QrcodeScannerStatus) {\n  Html5QrcodeScannerStatus[Html5QrcodeScannerStatus[\"STATUS_DEFAULT\"] = 0] = \"STATUS_DEFAULT\";\n  Html5QrcodeScannerStatus[Html5QrcodeScannerStatus[\"STATUS_SUCCESS\"] = 1] = \"STATUS_SUCCESS\";\n  Html5QrcodeScannerStatus[Html5QrcodeScannerStatus[\"STATUS_WARNING\"] = 2] = \"STATUS_WARNING\";\n  Html5QrcodeScannerStatus[Html5QrcodeScannerStatus[\"STATUS_REQUESTING_PERMISSION\"] = 3] = \"STATUS_REQUESTING_PERMISSION\";\n})(Html5QrcodeScannerStatus || (Html5QrcodeScannerStatus = {}));\nfunction toHtml5QrcodeCameraScanConfig(config) {\n  return {\n    fps: config.fps,\n    qrbox: config.qrbox,\n    aspectRatio: config.aspectRatio,\n    disableFlip: config.disableFlip,\n    videoConstraints: config.videoConstraints\n  };\n}\nfunction toHtml5QrcodeFullConfig(config, verbose) {\n  return {\n    formatsToSupport: config.formatsToSupport,\n    useBarCodeDetectorIfSupported: config.useBarCodeDetectorIfSupported,\n    experimentalFeatures: config.experimentalFeatures,\n    verbose: verbose\n  };\n}\nvar Html5QrcodeScanner = function () {\n  function Html5QrcodeScanner(elementId, config, verbose) {\n    this.lastMatchFound = null;\n    this.cameraScanImage = null;\n    this.fileScanImage = null;\n    this.fileSelectionUi = null;\n    this.elementId = elementId;\n    this.config = this.createConfig(config);\n    this.verbose = verbose === true;\n    if (!document.getElementById(elementId)) {\n      throw \"HTML Element with id=\" + elementId + \" not found\";\n    }\n    this.scanTypeSelector = new ScanTypeSelector(this.config.supportedScanTypes);\n    this.currentScanType = this.scanTypeSelector.getDefaultScanType();\n    this.sectionSwapAllowed = true;\n    this.logger = new BaseLoggger(this.verbose);\n    this.persistedDataManager = new PersistedDataManager();\n    if (config.rememberLastUsedCamera !== true) {\n      this.persistedDataManager.reset();\n    }\n  }\n  Html5QrcodeScanner.prototype.render = function (qrCodeSuccessCallback, qrCodeErrorCallback) {\n    var _this = this;\n    this.lastMatchFound = null;\n    this.qrCodeSuccessCallback = function (decodedText, result) {\n      if (qrCodeSuccessCallback) {\n        qrCodeSuccessCallback(decodedText, result);\n      } else {\n        if (_this.lastMatchFound === decodedText) {\n          return;\n        }\n        _this.lastMatchFound = decodedText;\n        _this.setHeaderMessage(Html5QrcodeScannerStrings.lastMatch(decodedText), Html5QrcodeScannerStatus.STATUS_SUCCESS);\n      }\n    };\n    this.qrCodeErrorCallback = function (errorMessage, error) {\n      if (qrCodeErrorCallback) {\n        qrCodeErrorCallback(errorMessage, error);\n      }\n    };\n    var container = document.getElementById(this.elementId);\n    if (!container) {\n      throw \"HTML Element with id=\" + this.elementId + \" not found\";\n    }\n    container.innerHTML = \"\";\n    this.createBasicLayout(container);\n    this.html5Qrcode = new Html5Qrcode(this.getScanRegionId(), toHtml5QrcodeFullConfig(this.config, this.verbose));\n  };\n  Html5QrcodeScanner.prototype.pause = function (shouldPauseVideo) {\n    if (isNullOrUndefined(shouldPauseVideo) || shouldPauseVideo !== true) {\n      shouldPauseVideo = false;\n    }\n    this.getHtml5QrcodeOrFail().pause(shouldPauseVideo);\n  };\n  Html5QrcodeScanner.prototype.resume = function () {\n    this.getHtml5QrcodeOrFail().resume();\n  };\n  Html5QrcodeScanner.prototype.getState = function () {\n    return this.getHtml5QrcodeOrFail().getState();\n  };\n  Html5QrcodeScanner.prototype.clear = function () {\n    var _this = this;\n    var emptyHtmlContainer = function () {\n      var mainContainer = document.getElementById(_this.elementId);\n      if (mainContainer) {\n        mainContainer.innerHTML = \"\";\n        _this.resetBasicLayout(mainContainer);\n      }\n    };\n    if (this.html5Qrcode) {\n      return new Promise(function (resolve, reject) {\n        if (!_this.html5Qrcode) {\n          resolve();\n          return;\n        }\n        if (_this.html5Qrcode.isScanning) {\n          _this.html5Qrcode.stop().then(function (_) {\n            if (!_this.html5Qrcode) {\n              resolve();\n              return;\n            }\n            _this.html5Qrcode.clear();\n            emptyHtmlContainer();\n            resolve();\n          }).catch(function (error) {\n            if (_this.verbose) {\n              _this.logger.logError(\"Unable to stop qrcode scanner\", error);\n            }\n            reject(error);\n          });\n        } else {\n          _this.html5Qrcode.clear();\n          emptyHtmlContainer();\n        }\n      });\n    }\n    return Promise.resolve();\n  };\n  Html5QrcodeScanner.prototype.getRunningTrackCapabilities = function () {\n    return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities();\n  };\n  Html5QrcodeScanner.prototype.getRunningTrackSettings = function () {\n    return this.getHtml5QrcodeOrFail().getRunningTrackSettings();\n  };\n  Html5QrcodeScanner.prototype.applyVideoConstraints = function (videoConstaints) {\n    return this.getHtml5QrcodeOrFail().applyVideoConstraints(videoConstaints);\n  };\n  Html5QrcodeScanner.prototype.getHtml5QrcodeOrFail = function () {\n    if (!this.html5Qrcode) {\n      throw \"Code scanner not initialized.\";\n    }\n    return this.html5Qrcode;\n  };\n  Html5QrcodeScanner.prototype.createConfig = function (config) {\n    if (config) {\n      if (!config.fps) {\n        config.fps = Html5QrcodeConstants.SCAN_DEFAULT_FPS;\n      }\n      if (config.rememberLastUsedCamera !== !Html5QrcodeConstants.DEFAULT_REMEMBER_LAST_CAMERA_USED) {\n        config.rememberLastUsedCamera = Html5QrcodeConstants.DEFAULT_REMEMBER_LAST_CAMERA_USED;\n      }\n      if (!config.supportedScanTypes) {\n        config.supportedScanTypes = Html5QrcodeConstants.DEFAULT_SUPPORTED_SCAN_TYPE;\n      }\n      return config;\n    }\n    return {\n      fps: Html5QrcodeConstants.SCAN_DEFAULT_FPS,\n      rememberLastUsedCamera: Html5QrcodeConstants.DEFAULT_REMEMBER_LAST_CAMERA_USED,\n      supportedScanTypes: Html5QrcodeConstants.DEFAULT_SUPPORTED_SCAN_TYPE\n    };\n  };\n  Html5QrcodeScanner.prototype.createBasicLayout = function (parent) {\n    parent.style.position = \"relative\";\n    parent.style.padding = \"0px\";\n    parent.style.border = \"1px solid silver\";\n    this.createHeader(parent);\n    var qrCodeScanRegion = document.createElement(\"div\");\n    var scanRegionId = this.getScanRegionId();\n    qrCodeScanRegion.id = scanRegionId;\n    qrCodeScanRegion.style.width = \"100%\";\n    qrCodeScanRegion.style.minHeight = \"100px\";\n    qrCodeScanRegion.style.textAlign = \"center\";\n    parent.appendChild(qrCodeScanRegion);\n    if (ScanTypeSelector.isCameraScanType(this.currentScanType)) {\n      this.insertCameraScanImageToScanRegion();\n    } else {\n      this.insertFileScanImageToScanRegion();\n    }\n    var qrCodeDashboard = document.createElement(\"div\");\n    var dashboardId = this.getDashboardId();\n    qrCodeDashboard.id = dashboardId;\n    qrCodeDashboard.style.width = \"100%\";\n    parent.appendChild(qrCodeDashboard);\n    this.setupInitialDashboard(qrCodeDashboard);\n  };\n  Html5QrcodeScanner.prototype.resetBasicLayout = function (mainContainer) {\n    mainContainer.style.border = \"none\";\n  };\n  Html5QrcodeScanner.prototype.setupInitialDashboard = function (dashboard) {\n    var $this = this;\n    this.createSection(dashboard);\n    this.createSectionControlPanel();\n    if (this.scanTypeSelector.hasMoreThanOneScanType()) {\n      this.createSectionSwap();\n    }\n  };\n  Html5QrcodeScanner.prototype.createHeader = function (dashboard) {\n    var header = document.createElement(\"div\");\n    header.style.textAlign = \"left\";\n    header.style.margin = \"0px\";\n    dashboard.appendChild(header);\n    var libraryInfo = new LibraryInfoContainer();\n    libraryInfo.renderInto(header);\n    var headerMessageContainer = document.createElement(\"div\");\n    headerMessageContainer.id = this.getHeaderMessageContainerId();\n    headerMessageContainer.style.display = \"none\";\n    headerMessageContainer.style.textAlign = \"center\";\n    headerMessageContainer.style.fontSize = \"14px\";\n    headerMessageContainer.style.padding = \"2px 10px\";\n    headerMessageContainer.style.margin = \"4px\";\n    headerMessageContainer.style.borderTop = \"1px solid #f6f6f6\";\n    header.appendChild(headerMessageContainer);\n  };\n  Html5QrcodeScanner.prototype.createSection = function (dashboard) {\n    var section = document.createElement(\"div\");\n    section.id = this.getDashboardSectionId();\n    section.style.width = \"100%\";\n    section.style.padding = \"10px 0px 10px 0px\";\n    section.style.textAlign = \"left\";\n    dashboard.appendChild(section);\n  };\n  Html5QrcodeScanner.prototype.createCameraListUi = function (scpCameraScanRegion, requestPermissionContainer, requestPermissionButton) {\n    var $this = this;\n    $this.showHideScanTypeSwapLink(false);\n    $this.setHeaderMessage(Html5QrcodeScannerStrings.cameraPermissionRequesting());\n    var createPermissionButtonIfNotExists = function () {\n      if (!requestPermissionButton) {\n        $this.createPermissionButton(scpCameraScanRegion, requestPermissionContainer);\n      }\n    };\n    Html5Qrcode.getCameras().then(function (cameras) {\n      $this.persistedDataManager.setHasPermission(true);\n      $this.showHideScanTypeSwapLink(true);\n      $this.resetHeaderMessage();\n      if (cameras && cameras.length > 0) {\n        scpCameraScanRegion.removeChild(requestPermissionContainer);\n        $this.renderCameraSelection(cameras);\n      } else {\n        $this.setHeaderMessage(Html5QrcodeScannerStrings.noCameraFound(), Html5QrcodeScannerStatus.STATUS_WARNING);\n        createPermissionButtonIfNotExists();\n      }\n    }).catch(function (error) {\n      $this.persistedDataManager.setHasPermission(false);\n      if (requestPermissionButton) {\n        requestPermissionButton.disabled = false;\n      } else {\n        createPermissionButtonIfNotExists();\n      }\n      $this.setHeaderMessage(error, Html5QrcodeScannerStatus.STATUS_WARNING);\n      $this.showHideScanTypeSwapLink(true);\n    });\n  };\n  Html5QrcodeScanner.prototype.createPermissionButton = function (scpCameraScanRegion, requestPermissionContainer) {\n    var $this = this;\n    var requestPermissionButton = BaseUiElementFactory.createElement(\"button\", this.getCameraPermissionButtonId());\n    requestPermissionButton.innerText = Html5QrcodeScannerStrings.cameraPermissionTitle();\n    requestPermissionButton.addEventListener(\"click\", function () {\n      requestPermissionButton.disabled = true;\n      $this.createCameraListUi(scpCameraScanRegion, requestPermissionContainer, requestPermissionButton);\n    });\n    requestPermissionContainer.appendChild(requestPermissionButton);\n  };\n  Html5QrcodeScanner.prototype.createPermissionsUi = function (scpCameraScanRegion, requestPermissionContainer) {\n    var $this = this;\n    if (ScanTypeSelector.isCameraScanType(this.currentScanType) && this.persistedDataManager.hasCameraPermissions()) {\n      CameraPermissions.hasPermissions().then(function (hasPermissions) {\n        if (hasPermissions) {\n          $this.createCameraListUi(scpCameraScanRegion, requestPermissionContainer);\n        } else {\n          $this.persistedDataManager.setHasPermission(false);\n          $this.createPermissionButton(scpCameraScanRegion, requestPermissionContainer);\n        }\n      }).catch(function (_) {\n        $this.persistedDataManager.setHasPermission(false);\n        $this.createPermissionButton(scpCameraScanRegion, requestPermissionContainer);\n      });\n      return;\n    }\n    this.createPermissionButton(scpCameraScanRegion, requestPermissionContainer);\n  };\n  Html5QrcodeScanner.prototype.createSectionControlPanel = function () {\n    var $this = this;\n    var section = document.getElementById(this.getDashboardSectionId());\n    var sectionControlPanel = document.createElement(\"div\");\n    section.appendChild(sectionControlPanel);\n    var scpCameraScanRegion = document.createElement(\"div\");\n    scpCameraScanRegion.id = this.getDashboardSectionCameraScanRegionId();\n    scpCameraScanRegion.style.display = ScanTypeSelector.isCameraScanType(this.currentScanType) ? \"block\" : \"none\";\n    sectionControlPanel.appendChild(scpCameraScanRegion);\n    var requestPermissionContainer = document.createElement(\"div\");\n    requestPermissionContainer.style.textAlign = \"center\";\n    scpCameraScanRegion.appendChild(requestPermissionContainer);\n    if (this.scanTypeSelector.isCameraScanRequired()) {\n      this.createPermissionsUi(scpCameraScanRegion, requestPermissionContainer);\n    }\n    this.renderFileScanUi(sectionControlPanel);\n  };\n  Html5QrcodeScanner.prototype.renderFileScanUi = function (parent) {\n    var showOnRender = ScanTypeSelector.isFileScanType(this.currentScanType);\n    var $this = this;\n    var onFileSelected = function (file) {\n      if (!$this.html5Qrcode) {\n        throw \"html5Qrcode not defined\";\n      }\n      if (!ScanTypeSelector.isFileScanType($this.currentScanType)) {\n        return;\n      }\n      $this.setHeaderMessage(Html5QrcodeScannerStrings.loadingImage());\n      $this.html5Qrcode.scanFileV2(file, true).then(function (html5qrcodeResult) {\n        $this.resetHeaderMessage();\n        $this.qrCodeSuccessCallback(html5qrcodeResult.decodedText, html5qrcodeResult);\n      }).catch(function (error) {\n        $this.setHeaderMessage(error, Html5QrcodeScannerStatus.STATUS_WARNING);\n        $this.qrCodeErrorCallback(error, Html5QrcodeErrorFactory.createFrom(error));\n      });\n    };\n    this.fileSelectionUi = FileSelectionUi.create(parent, showOnRender, onFileSelected);\n  };\n  Html5QrcodeScanner.prototype.renderCameraSelection = function (cameras) {\n    var _this = this;\n    var $this = this;\n    var scpCameraScanRegion = document.getElementById(this.getDashboardSectionCameraScanRegionId());\n    scpCameraScanRegion.style.textAlign = \"center\";\n    var cameraZoomUi = CameraZoomUi.create(scpCameraScanRegion, false);\n    var renderCameraZoomUiIfSupported = function (cameraCapabilities) {\n      var zoomCapability = cameraCapabilities.zoomFeature();\n      if (!zoomCapability.isSupported()) {\n        return;\n      }\n      cameraZoomUi.setOnCameraZoomValueChangeCallback(function (zoomValue) {\n        zoomCapability.apply(zoomValue);\n      });\n      var defaultZoom = 1;\n      if (_this.config.defaultZoomValueIfSupported) {\n        defaultZoom = _this.config.defaultZoomValueIfSupported;\n      }\n      defaultZoom = clip(defaultZoom, zoomCapability.min(), zoomCapability.max());\n      cameraZoomUi.setValues(zoomCapability.min(), zoomCapability.max(), defaultZoom, zoomCapability.step());\n      cameraZoomUi.show();\n    };\n    var cameraSelectUi = CameraSelectionUi.create(scpCameraScanRegion, cameras);\n    var cameraActionContainer = document.createElement(\"span\");\n    var cameraActionStartButton = BaseUiElementFactory.createElement(\"button\", PublicUiElementIdAndClasses.CAMERA_START_BUTTON_ID);\n    cameraActionStartButton.innerText = Html5QrcodeScannerStrings.scanButtonStartScanningText();\n    cameraActionContainer.appendChild(cameraActionStartButton);\n    var cameraActionStopButton = BaseUiElementFactory.createElement(\"button\", PublicUiElementIdAndClasses.CAMERA_STOP_BUTTON_ID);\n    cameraActionStopButton.innerText = Html5QrcodeScannerStrings.scanButtonStopScanningText();\n    cameraActionStopButton.style.display = \"none\";\n    cameraActionStopButton.disabled = true;\n    cameraActionContainer.appendChild(cameraActionStopButton);\n    var torchButton;\n    var createAndShowTorchButtonIfSupported = function (cameraCapabilities) {\n      if (!cameraCapabilities.torchFeature().isSupported()) {\n        if (torchButton) {\n          torchButton.hide();\n        }\n        return;\n      }\n      if (!torchButton) {\n        torchButton = TorchButton.create(cameraActionContainer, cameraCapabilities.torchFeature(), {\n          display: \"none\",\n          marginLeft: \"5px\"\n        }, function (errorMessage) {\n          $this.setHeaderMessage(errorMessage, Html5QrcodeScannerStatus.STATUS_WARNING);\n        });\n      } else {\n        torchButton.updateTorchCapability(cameraCapabilities.torchFeature());\n      }\n      torchButton.show();\n    };\n    scpCameraScanRegion.appendChild(cameraActionContainer);\n    var resetCameraActionStartButton = function (shouldShow) {\n      if (!shouldShow) {\n        cameraActionStartButton.style.display = \"none\";\n      }\n      cameraActionStartButton.innerText = Html5QrcodeScannerStrings.scanButtonStartScanningText();\n      cameraActionStartButton.style.opacity = \"1\";\n      cameraActionStartButton.disabled = false;\n      if (shouldShow) {\n        cameraActionStartButton.style.display = \"inline-block\";\n      }\n    };\n    cameraActionStartButton.addEventListener(\"click\", function (_) {\n      cameraActionStartButton.innerText = Html5QrcodeScannerStrings.scanButtonScanningStarting();\n      cameraSelectUi.disable();\n      cameraActionStartButton.disabled = true;\n      cameraActionStartButton.style.opacity = \"0.5\";\n      if (_this.scanTypeSelector.hasMoreThanOneScanType()) {\n        $this.showHideScanTypeSwapLink(false);\n      }\n      $this.resetHeaderMessage();\n      var cameraId = cameraSelectUi.getValue();\n      $this.persistedDataManager.setLastUsedCameraId(cameraId);\n      $this.html5Qrcode.start(cameraId, toHtml5QrcodeCameraScanConfig($this.config), $this.qrCodeSuccessCallback, $this.qrCodeErrorCallback).then(function (_) {\n        cameraActionStopButton.disabled = false;\n        cameraActionStopButton.style.display = \"inline-block\";\n        resetCameraActionStartButton(false);\n        var cameraCapabilities = $this.html5Qrcode.getRunningTrackCameraCapabilities();\n        if (_this.config.showTorchButtonIfSupported === true) {\n          createAndShowTorchButtonIfSupported(cameraCapabilities);\n        }\n        if (_this.config.showZoomSliderIfSupported === true) {\n          renderCameraZoomUiIfSupported(cameraCapabilities);\n        }\n      }).catch(function (error) {\n        $this.showHideScanTypeSwapLink(true);\n        cameraSelectUi.enable();\n        resetCameraActionStartButton(true);\n        $this.setHeaderMessage(error, Html5QrcodeScannerStatus.STATUS_WARNING);\n      });\n    });\n    if (cameraSelectUi.hasSingleItem()) {\n      cameraActionStartButton.click();\n    }\n    cameraActionStopButton.addEventListener(\"click\", function (_) {\n      if (!$this.html5Qrcode) {\n        throw \"html5Qrcode not defined\";\n      }\n      cameraActionStopButton.disabled = true;\n      $this.html5Qrcode.stop().then(function (_) {\n        if (_this.scanTypeSelector.hasMoreThanOneScanType()) {\n          $this.showHideScanTypeSwapLink(true);\n        }\n        cameraSelectUi.enable();\n        cameraActionStartButton.disabled = false;\n        cameraActionStopButton.style.display = \"none\";\n        cameraActionStartButton.style.display = \"inline-block\";\n        if (torchButton) {\n          torchButton.reset();\n          torchButton.hide();\n        }\n        cameraZoomUi.removeOnCameraZoomValueChangeCallback();\n        cameraZoomUi.hide();\n        $this.insertCameraScanImageToScanRegion();\n      }).catch(function (error) {\n        cameraActionStopButton.disabled = false;\n        $this.setHeaderMessage(error, Html5QrcodeScannerStatus.STATUS_WARNING);\n      });\n    });\n    if ($this.persistedDataManager.getLastUsedCameraId()) {\n      var cameraId = $this.persistedDataManager.getLastUsedCameraId();\n      if (cameraSelectUi.hasValue(cameraId)) {\n        cameraSelectUi.setValue(cameraId);\n        cameraActionStartButton.click();\n      } else {\n        $this.persistedDataManager.resetLastUsedCameraId();\n      }\n    }\n  };\n  Html5QrcodeScanner.prototype.createSectionSwap = function () {\n    var $this = this;\n    var TEXT_IF_CAMERA_SCAN_SELECTED = Html5QrcodeScannerStrings.textIfCameraScanSelected();\n    var TEXT_IF_FILE_SCAN_SELECTED = Html5QrcodeScannerStrings.textIfFileScanSelected();\n    var section = document.getElementById(this.getDashboardSectionId());\n    var switchContainer = document.createElement(\"div\");\n    switchContainer.style.textAlign = \"center\";\n    var switchScanTypeLink = BaseUiElementFactory.createElement(\"a\", this.getDashboardSectionSwapLinkId());\n    switchScanTypeLink.style.textDecoration = \"underline\";\n    switchScanTypeLink.innerText = ScanTypeSelector.isCameraScanType(this.currentScanType) ? TEXT_IF_CAMERA_SCAN_SELECTED : TEXT_IF_FILE_SCAN_SELECTED;\n    switchScanTypeLink.addEventListener(\"click\", function () {\n      if (!$this.sectionSwapAllowed) {\n        if ($this.verbose) {\n          $this.logger.logError(\"Section swap called when not allowed\");\n        }\n        return;\n      }\n      $this.resetHeaderMessage();\n      $this.fileSelectionUi.resetValue();\n      $this.sectionSwapAllowed = false;\n      if (ScanTypeSelector.isCameraScanType($this.currentScanType)) {\n        $this.clearScanRegion();\n        $this.getCameraScanRegion().style.display = \"none\";\n        $this.fileSelectionUi.show();\n        switchScanTypeLink.innerText = TEXT_IF_FILE_SCAN_SELECTED;\n        $this.currentScanType = Html5QrcodeScanType.SCAN_TYPE_FILE;\n        $this.insertFileScanImageToScanRegion();\n      } else {\n        $this.clearScanRegion();\n        $this.getCameraScanRegion().style.display = \"block\";\n        $this.fileSelectionUi.hide();\n        switchScanTypeLink.innerText = TEXT_IF_CAMERA_SCAN_SELECTED;\n        $this.currentScanType = Html5QrcodeScanType.SCAN_TYPE_CAMERA;\n        $this.insertCameraScanImageToScanRegion();\n        $this.startCameraScanIfPermissionExistsOnSwap();\n      }\n      $this.sectionSwapAllowed = true;\n    });\n    switchContainer.appendChild(switchScanTypeLink);\n    section.appendChild(switchContainer);\n  };\n  Html5QrcodeScanner.prototype.startCameraScanIfPermissionExistsOnSwap = function () {\n    var _this = this;\n    var $this = this;\n    if (this.persistedDataManager.hasCameraPermissions()) {\n      CameraPermissions.hasPermissions().then(function (hasPermissions) {\n        if (hasPermissions) {\n          var permissionButton = document.getElementById($this.getCameraPermissionButtonId());\n          if (!permissionButton) {\n            _this.logger.logError(\"Permission button not found, fail;\");\n            throw \"Permission button not found\";\n          }\n          permissionButton.click();\n        } else {\n          $this.persistedDataManager.setHasPermission(false);\n        }\n      }).catch(function (_) {\n        $this.persistedDataManager.setHasPermission(false);\n      });\n      return;\n    }\n  };\n  Html5QrcodeScanner.prototype.resetHeaderMessage = function () {\n    var messageDiv = document.getElementById(this.getHeaderMessageContainerId());\n    messageDiv.style.display = \"none\";\n  };\n  Html5QrcodeScanner.prototype.setHeaderMessage = function (messageText, scannerStatus) {\n    if (!scannerStatus) {\n      scannerStatus = Html5QrcodeScannerStatus.STATUS_DEFAULT;\n    }\n    var messageDiv = this.getHeaderMessageDiv();\n    messageDiv.innerText = messageText;\n    messageDiv.style.display = \"block\";\n    switch (scannerStatus) {\n      case Html5QrcodeScannerStatus.STATUS_SUCCESS:\n        messageDiv.style.background = \"rgba(106, 175, 80, 0.26)\";\n        messageDiv.style.color = \"#477735\";\n        break;\n      case Html5QrcodeScannerStatus.STATUS_WARNING:\n        messageDiv.style.background = \"rgba(203, 36, 49, 0.14)\";\n        messageDiv.style.color = \"#cb2431\";\n        break;\n      case Html5QrcodeScannerStatus.STATUS_DEFAULT:\n      default:\n        messageDiv.style.background = \"rgba(0, 0, 0, 0)\";\n        messageDiv.style.color = \"rgb(17, 17, 17)\";\n        break;\n    }\n  };\n  Html5QrcodeScanner.prototype.showHideScanTypeSwapLink = function (shouldDisplay) {\n    if (shouldDisplay !== true) {\n      shouldDisplay = false;\n    }\n    this.sectionSwapAllowed = shouldDisplay;\n    this.getDashboardSectionSwapLink().style.display = shouldDisplay ? \"inline-block\" : \"none\";\n  };\n  Html5QrcodeScanner.prototype.insertCameraScanImageToScanRegion = function () {\n    var $this = this;\n    var qrCodeScanRegion = document.getElementById(this.getScanRegionId());\n    if (this.cameraScanImage) {\n      qrCodeScanRegion.innerHTML = \"<br>\";\n      qrCodeScanRegion.appendChild(this.cameraScanImage);\n      return;\n    }\n    this.cameraScanImage = new Image();\n    this.cameraScanImage.onload = function (_) {\n      qrCodeScanRegion.innerHTML = \"<br>\";\n      qrCodeScanRegion.appendChild($this.cameraScanImage);\n    };\n    this.cameraScanImage.width = 64;\n    this.cameraScanImage.style.opacity = \"0.8\";\n    this.cameraScanImage.src = ASSET_CAMERA_SCAN;\n  };\n  Html5QrcodeScanner.prototype.insertFileScanImageToScanRegion = function () {\n    var $this = this;\n    var qrCodeScanRegion = document.getElementById(this.getScanRegionId());\n    if (this.fileScanImage) {\n      qrCodeScanRegion.innerHTML = \"<br>\";\n      qrCodeScanRegion.appendChild(this.fileScanImage);\n      return;\n    }\n    this.fileScanImage = new Image();\n    this.fileScanImage.onload = function (_) {\n      qrCodeScanRegion.innerHTML = \"<br>\";\n      qrCodeScanRegion.appendChild($this.fileScanImage);\n    };\n    this.fileScanImage.width = 64;\n    this.fileScanImage.style.opacity = \"0.8\";\n    this.fileScanImage.src = ASSET_FILE_SCAN;\n  };\n  Html5QrcodeScanner.prototype.clearScanRegion = function () {\n    var qrCodeScanRegion = document.getElementById(this.getScanRegionId());\n    qrCodeScanRegion.innerHTML = \"\";\n  };\n  Html5QrcodeScanner.prototype.getDashboardSectionId = function () {\n    return this.elementId + \"__dashboard_section\";\n  };\n  Html5QrcodeScanner.prototype.getDashboardSectionCameraScanRegionId = function () {\n    return this.elementId + \"__dashboard_section_csr\";\n  };\n  Html5QrcodeScanner.prototype.getDashboardSectionSwapLinkId = function () {\n    return PublicUiElementIdAndClasses.SCAN_TYPE_CHANGE_ANCHOR_ID;\n  };\n  Html5QrcodeScanner.prototype.getScanRegionId = function () {\n    return this.elementId + \"__scan_region\";\n  };\n  Html5QrcodeScanner.prototype.getDashboardId = function () {\n    return this.elementId + \"__dashboard\";\n  };\n  Html5QrcodeScanner.prototype.getHeaderMessageContainerId = function () {\n    return this.elementId + \"__header_message\";\n  };\n  Html5QrcodeScanner.prototype.getCameraPermissionButtonId = function () {\n    return PublicUiElementIdAndClasses.CAMERA_PERMISSION_BUTTON_ID;\n  };\n  Html5QrcodeScanner.prototype.getCameraScanRegion = function () {\n    return document.getElementById(this.getDashboardSectionCameraScanRegionId());\n  };\n  Html5QrcodeScanner.prototype.getDashboardSectionSwapLink = function () {\n    return document.getElementById(this.getDashboardSectionSwapLinkId());\n  };\n  Html5QrcodeScanner.prototype.getHeaderMessageDiv = function () {\n    return document.getElementById(this.getHeaderMessageContainerId());\n  };\n  return Html5QrcodeScanner;\n}();\nexport { Html5QrcodeScanner };","map":{"version":3,"mappings":"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","names":["Html5QrcodeConstants","Html5QrcodeScanType","Html5QrcodeErrorFactory","BaseLoggger","isNullOrUndefined","clip","Html5Qrcode","Html5QrcodeScannerStrings","ASSET_FILE_SCAN","ASSET_CAMERA_SCAN","PersistedDataManager","LibraryInfoContainer","CameraPermissions","ScanTypeSelector","TorchButton","FileSelectionUi","BaseUiElementFactory","PublicUiElementIdAndClasses","CameraSelectionUi","CameraZoomUi","Html5QrcodeScannerStatus","toHtml5QrcodeCameraScanConfig","config","fps","qrbox","aspectRatio","disableFlip","videoConstraints","toHtml5QrcodeFullConfig","verbose","formatsToSupport","useBarCodeDetectorIfSupported","experimentalFeatures","elementId","createConfig","document","getElementById","scanTypeSelector","supportedScanTypes","currentScanType","getDefaultScanType","sectionSwapAllowed","logger","persistedDataManager","rememberLastUsedCamera","reset","Html5QrcodeScanner","qrCodeSuccessCallback","qrCodeErrorCallback","lastMatchFound","decodedText","result","_this","setHeaderMessage","lastMatch","STATUS_SUCCESS","errorMessage","error","container","innerHTML","createBasicLayout","html5Qrcode","getScanRegionId","shouldPauseVideo","getHtml5QrcodeOrFail","pause","resume","getState","emptyHtmlContainer","mainContainer","resetBasicLayout","Promise","resolve","reject","isScanning","stop","then","_","clear","catch","logError","getRunningTrackCapabilities","getRunningTrackSettings","videoConstaints","applyVideoConstraints","SCAN_DEFAULT_FPS","DEFAULT_REMEMBER_LAST_CAMERA_USED","DEFAULT_SUPPORTED_SCAN_TYPE","parent","style","position","padding","border","createHeader","qrCodeScanRegion","createElement","scanRegionId","id","width","minHeight","textAlign","appendChild","isCameraScanType","insertCameraScanImageToScanRegion","insertFileScanImageToScanRegion","qrCodeDashboard","dashboardId","getDashboardId","setupInitialDashboard","dashboard","$this","createSection","createSectionControlPanel","hasMoreThanOneScanType","createSectionSwap","header","margin","libraryInfo","renderInto","headerMessageContainer","getHeaderMessageContainerId","display","fontSize","borderTop","section","getDashboardSectionId","scpCameraScanRegion","requestPermissionContainer","requestPermissionButton","showHideScanTypeSwapLink","cameraPermissionRequesting","createPermissionButtonIfNotExists","createPermissionButton","getCameras","cameras","setHasPermission","resetHeaderMessage","length","removeChild","renderCameraSelection","noCameraFound","STATUS_WARNING","disabled","getCameraPermissionButtonId","innerText","cameraPermissionTitle","addEventListener","createCameraListUi","hasCameraPermissions","hasPermissions","sectionControlPanel","getDashboardSectionCameraScanRegionId","isCameraScanRequired","createPermissionsUi","renderFileScanUi","showOnRender","isFileScanType","onFileSelected","file","loadingImage","scanFileV2","html5qrcodeResult","createFrom","fileSelectionUi","create","cameraZoomUi","renderCameraZoomUiIfSupported","cameraCapabilities","zoomCapability","zoomFeature","isSupported","setOnCameraZoomValueChangeCallback","zoomValue","apply","defaultZoom","defaultZoomValueIfSupported","min","max","setValues","step","show","cameraSelectUi","cameraActionContainer","cameraActionStartButton","CAMERA_START_BUTTON_ID","scanButtonStartScanningText","cameraActionStopButton","CAMERA_STOP_BUTTON_ID","scanButtonStopScanningText","torchButton","createAndShowTorchButtonIfSupported","torchFeature","hide","marginLeft","updateTorchCapability","resetCameraActionStartButton","shouldShow","opacity","scanButtonScanningStarting","disable","cameraId","getValue","setLastUsedCameraId","start","getRunningTrackCameraCapabilities","showTorchButtonIfSupported","showZoomSliderIfSupported","enable","hasSingleItem","click","removeOnCameraZoomValueChangeCallback","getLastUsedCameraId","hasValue","setValue","resetLastUsedCameraId","TEXT_IF_CAMERA_SCAN_SELECTED","textIfCameraScanSelected","TEXT_IF_FILE_SCAN_SELECTED","textIfFileScanSelected","switchContainer","switchScanTypeLink","getDashboardSectionSwapLinkId","textDecoration","resetValue","clearScanRegion","getCameraScanRegion","SCAN_TYPE_FILE","SCAN_TYPE_CAMERA","startCameraScanIfPermissionExistsOnSwap","permissionButton","messageDiv","messageText","scannerStatus","STATUS_DEFAULT","getHeaderMessageDiv","background","color","shouldDisplay","getDashboardSectionSwapLink","cameraScanImage","Image","onload","src","fileScanImage","SCAN_TYPE_CHANGE_ANCHOR_ID","CAMERA_PERMISSION_BUTTON_ID"],"sourceRoot":"","sources":["../../src/html5-qrcode-scanner.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}
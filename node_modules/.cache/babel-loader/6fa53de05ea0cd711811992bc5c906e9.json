{"ast":null,"code":"var PersistedDataFactory = function () {\n  function PersistedDataFactory() {}\n  PersistedDataFactory.createDefault = function () {\n    return {\n      hasPermission: false,\n      lastUsedCameraId: null\n    };\n  };\n  return PersistedDataFactory;\n}();\nvar PersistedDataManager = function () {\n  function PersistedDataManager() {\n    this.data = PersistedDataFactory.createDefault();\n    var data = localStorage.getItem(PersistedDataManager.LOCAL_STORAGE_KEY);\n    if (!data) {\n      this.reset();\n    } else {\n      this.data = JSON.parse(data);\n    }\n  }\n  PersistedDataManager.prototype.hasCameraPermissions = function () {\n    return this.data.hasPermission;\n  };\n  PersistedDataManager.prototype.getLastUsedCameraId = function () {\n    return this.data.lastUsedCameraId;\n  };\n  PersistedDataManager.prototype.setHasPermission = function (hasPermission) {\n    this.data.hasPermission = hasPermission;\n    this.flush();\n  };\n  PersistedDataManager.prototype.setLastUsedCameraId = function (lastUsedCameraId) {\n    this.data.lastUsedCameraId = lastUsedCameraId;\n    this.flush();\n  };\n  PersistedDataManager.prototype.resetLastUsedCameraId = function () {\n    this.data.lastUsedCameraId = null;\n    this.flush();\n  };\n  PersistedDataManager.prototype.reset = function () {\n    this.data = PersistedDataFactory.createDefault();\n    this.flush();\n  };\n  PersistedDataManager.prototype.flush = function () {\n    localStorage.setItem(PersistedDataManager.LOCAL_STORAGE_KEY, JSON.stringify(this.data));\n  };\n  PersistedDataManager.LOCAL_STORAGE_KEY = \"HTML5_QRCODE_DATA\";\n  return PersistedDataManager;\n}();\nexport { PersistedDataManager };","map":{"version":3,"mappings":"AAeA;EAAA,iCAOA;EANWA,kCAAa,GAApB;IACI,OAAO;MACHC,aAAa,EAAE,KAAK;MACpBC,gBAAgB,EAAE;KACrB;EACL,CAAC;EACL,2BAAC;AAAD,CAAC,EAPD;AASA;EAKI;IAHQ,SAAI,GAAkBF,oBAAoB,CAACG,aAAa,EAAE;IAI9D,IAAIC,IAAI,GAAGC,YAAY,CAACC,OAAO,CAACC,oBAAoB,CAACC,iBAAiB,CAAC;IACvE,IAAI,CAACJ,IAAI,EAAE;MACP,IAAI,CAACK,KAAK,EAAE;KACf,MAAM;MACH,IAAI,CAACL,IAAI,GAAGM,IAAI,CAACC,KAAK,CAACP,IAAI,CAAC;;EAEpC;EAEOG,mDAAoB,GAA3B;IACI,OAAO,IAAI,CAACH,IAAI,CAACH,aAAa;EAClC,CAAC;EAEMM,kDAAmB,GAA1B;IACI,OAAO,IAAI,CAACH,IAAI,CAACF,gBAAgB;EACrC,CAAC;EAEMK,+CAAgB,GAAvB,UAAwBN,aAAsB;IAC1C,IAAI,CAACG,IAAI,CAACH,aAAa,GAAGA,aAAa;IACvC,IAAI,CAACW,KAAK,EAAE;EAChB,CAAC;EAEML,kDAAmB,GAA1B,UAA2BL,gBAAwB;IAC/C,IAAI,CAACE,IAAI,CAACF,gBAAgB,GAAGA,gBAAgB;IAC7C,IAAI,CAACU,KAAK,EAAE;EAChB,CAAC;EAEML,oDAAqB,GAA5B;IACI,IAAI,CAACH,IAAI,CAACF,gBAAgB,GAAG,IAAI;IACjC,IAAI,CAACU,KAAK,EAAE;EAChB,CAAC;EAEML,oCAAK,GAAZ;IACI,IAAI,CAACH,IAAI,GAAGJ,oBAAoB,CAACG,aAAa,EAAE;IAChD,IAAI,CAACS,KAAK,EAAE;EAChB,CAAC;EAEOL,oCAAK,GAAb;IACIF,YAAY,CAACQ,OAAO,CAChBN,oBAAoB,CAACC,iBAAiB,EACtCE,IAAI,CAACI,SAAS,CAAC,IAAI,CAACV,IAAI,CAAC,CAAC;EAClC,CAAC;EA3CcG,sCAAiB,GAAW,mBAAmB;EA4ClE,2BAAC;CAAA,EA/CD;SAAaA,oBAAoB","names":["PersistedDataFactory","hasPermission","lastUsedCameraId","createDefault","data","localStorage","getItem","PersistedDataManager","LOCAL_STORAGE_KEY","reset","JSON","parse","flush","setItem","stringify"],"sourceRoot":"","sources":["../../src/storage.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}
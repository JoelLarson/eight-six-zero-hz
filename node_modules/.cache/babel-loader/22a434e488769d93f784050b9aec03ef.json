{"ast":null,"code":"import { Html5QrcodeScannerStrings } from \"../../strings\";\nimport { BaseUiElementFactory, PublicUiElementIdAndClasses } from \"./base\";\nvar FileSelectionUi = function () {\n  function FileSelectionUi(parentElement, showOnRender, onFileSelected) {\n    this.fileBasedScanRegion = this.createFileBasedScanRegion();\n    this.fileBasedScanRegion.style.display = showOnRender ? \"block\" : \"none\";\n    parentElement.appendChild(this.fileBasedScanRegion);\n    var fileScanLabel = document.createElement(\"label\");\n    fileScanLabel.setAttribute(\"for\", this.getFileScanInputId());\n    fileScanLabel.style.display = \"inline-block\";\n    this.fileBasedScanRegion.appendChild(fileScanLabel);\n    this.fileSelectionButton = BaseUiElementFactory.createElement(\"button\", PublicUiElementIdAndClasses.FILE_SELECTION_BUTTON_ID);\n    this.setInitialValueToButton();\n    this.fileSelectionButton.addEventListener(\"click\", function (_) {\n      fileScanLabel.click();\n    });\n    fileScanLabel.append(this.fileSelectionButton);\n    this.fileScanInput = BaseUiElementFactory.createElement(\"input\", this.getFileScanInputId());\n    this.fileScanInput.type = \"file\";\n    this.fileScanInput.accept = \"image/*\";\n    this.fileScanInput.style.display = \"none\";\n    fileScanLabel.appendChild(this.fileScanInput);\n    var $this = this;\n    this.fileScanInput.addEventListener(\"change\", function (e) {\n      if (e == null || e.target == null) {\n        return;\n      }\n      var target = e.target;\n      if (target.files && target.files.length === 0) {\n        return;\n      }\n      var fileList = target.files;\n      var file = fileList[0];\n      var fileName = file.name;\n      $this.setImageNameToButton(fileName);\n      onFileSelected(file);\n    });\n    var dragAndDropMessage = this.createDragAndDropMessage();\n    this.fileBasedScanRegion.appendChild(dragAndDropMessage);\n    this.fileBasedScanRegion.addEventListener(\"dragenter\", function (event) {\n      $this.fileBasedScanRegion.style.border = $this.fileBasedScanRegionActiveBorder();\n      event.stopPropagation();\n      event.preventDefault();\n    });\n    this.fileBasedScanRegion.addEventListener(\"dragleave\", function (event) {\n      $this.fileBasedScanRegion.style.border = $this.fileBasedScanRegionDefaultBorder();\n      event.stopPropagation();\n      event.preventDefault();\n    });\n    this.fileBasedScanRegion.addEventListener(\"dragover\", function (event) {\n      $this.fileBasedScanRegion.style.border = $this.fileBasedScanRegionActiveBorder();\n      event.stopPropagation();\n      event.preventDefault();\n    });\n    this.fileBasedScanRegion.addEventListener(\"drop\", function (event) {\n      event.stopPropagation();\n      event.preventDefault();\n      $this.fileBasedScanRegion.style.border = $this.fileBasedScanRegionDefaultBorder();\n      var dataTransfer = event.dataTransfer;\n      if (dataTransfer) {\n        var files = dataTransfer.files;\n        if (!files || files.length === 0) {\n          return;\n        }\n        var isAnyFileImage = false;\n        for (var i = 0; i < files.length; ++i) {\n          var file = files.item(i);\n          if (!file) {\n            continue;\n          }\n          var imageType = /image.*/;\n          if (!file.type.match(imageType)) {\n            continue;\n          }\n          isAnyFileImage = true;\n          var fileName = file.name;\n          $this.setImageNameToButton(fileName);\n          onFileSelected(file);\n          dragAndDropMessage.innerText = Html5QrcodeScannerStrings.dragAndDropMessage();\n          break;\n        }\n        if (!isAnyFileImage) {\n          dragAndDropMessage.innerText = Html5QrcodeScannerStrings.dragAndDropMessageOnlyImages();\n        }\n      }\n    });\n  }\n  FileSelectionUi.prototype.hide = function () {\n    this.fileBasedScanRegion.style.display = \"none\";\n    this.fileScanInput.disabled = true;\n  };\n  FileSelectionUi.prototype.show = function () {\n    this.fileBasedScanRegion.style.display = \"block\";\n    this.fileScanInput.disabled = false;\n  };\n  FileSelectionUi.prototype.isShowing = function () {\n    return this.fileBasedScanRegion.style.display === \"block\";\n  };\n  FileSelectionUi.prototype.resetValue = function () {\n    this.fileScanInput.value = \"\";\n    this.setInitialValueToButton();\n  };\n  FileSelectionUi.prototype.createFileBasedScanRegion = function () {\n    var fileBasedScanRegion = document.createElement(\"div\");\n    fileBasedScanRegion.style.textAlign = \"center\";\n    fileBasedScanRegion.style.margin = \"auto\";\n    fileBasedScanRegion.style.width = \"80%\";\n    fileBasedScanRegion.style.maxWidth = \"600px\";\n    fileBasedScanRegion.style.border = this.fileBasedScanRegionDefaultBorder();\n    fileBasedScanRegion.style.padding = \"10px\";\n    fileBasedScanRegion.style.marginBottom = \"10px\";\n    return fileBasedScanRegion;\n  };\n  FileSelectionUi.prototype.fileBasedScanRegionDefaultBorder = function () {\n    return \"6px dashed #ebebeb\";\n  };\n  FileSelectionUi.prototype.fileBasedScanRegionActiveBorder = function () {\n    return \"6px dashed rgb(153 151 151)\";\n  };\n  FileSelectionUi.prototype.createDragAndDropMessage = function () {\n    var dragAndDropMessage = document.createElement(\"div\");\n    dragAndDropMessage.innerText = Html5QrcodeScannerStrings.dragAndDropMessage();\n    dragAndDropMessage.style.fontWeight = \"400\";\n    return dragAndDropMessage;\n  };\n  FileSelectionUi.prototype.setImageNameToButton = function (imageFileName) {\n    var MAX_CHARS = 20;\n    if (imageFileName.length > MAX_CHARS) {\n      var start8Chars = imageFileName.substring(0, 8);\n      var length_1 = imageFileName.length;\n      var last8Chars = imageFileName.substring(length_1 - 8, length_1);\n      imageFileName = start8Chars + \"....\" + last8Chars;\n    }\n    var newText = Html5QrcodeScannerStrings.fileSelectionChooseAnother() + \" - \" + imageFileName;\n    this.fileSelectionButton.innerText = newText;\n  };\n  FileSelectionUi.prototype.setInitialValueToButton = function () {\n    var initialText = Html5QrcodeScannerStrings.fileSelectionChooseImage() + \" - \" + Html5QrcodeScannerStrings.fileSelectionNoImageSelected();\n    this.fileSelectionButton.innerText = initialText;\n  };\n  FileSelectionUi.prototype.getFileScanInputId = function () {\n    return \"html5-qrcode-private-filescan-input\";\n  };\n  FileSelectionUi.create = function (parentElement, showOnRender, onFileSelected) {\n    var button = new FileSelectionUi(parentElement, showOnRender, onFileSelected);\n    return button;\n  };\n  return FileSelectionUi;\n}();\nexport { FileSelectionUi };","map":{"version":3,"mappings":"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","names":["Html5QrcodeScannerStrings","BaseUiElementFactory","PublicUiElementIdAndClasses","parentElement","showOnRender","onFileSelected","fileBasedScanRegion","createFileBasedScanRegion","style","display","appendChild","fileScanLabel","document","createElement","setAttribute","getFileScanInputId","fileSelectionButton","FILE_SELECTION_BUTTON_ID","setInitialValueToButton","addEventListener","_","click","append","fileScanInput","type","accept","$this","e","target","files","length","fileList","file","fileName","name","setImageNameToButton","dragAndDropMessage","createDragAndDropMessage","event","border","fileBasedScanRegionActiveBorder","stopPropagation","preventDefault","fileBasedScanRegionDefaultBorder","dataTransfer","isAnyFileImage","i","item","imageType","match","innerText","dragAndDropMessageOnlyImages","FileSelectionUi","disabled","value","textAlign","margin","width","maxWidth","padding","marginBottom","fontWeight","imageFileName","MAX_CHARS","start8Chars","substring","length_1","last8Chars","newText","fileSelectionChooseAnother","initialText","fileSelectionChooseImage","fileSelectionNoImageSelected","button"],"sourceRoot":"","sources":["../../../../src/ui/scanner/file-selection-ui.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}
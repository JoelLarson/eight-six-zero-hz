{"ast":null,"code":"export var Html5QrcodeScannerState;\n(function (Html5QrcodeScannerState) {\n  Html5QrcodeScannerState[Html5QrcodeScannerState[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\n  Html5QrcodeScannerState[Html5QrcodeScannerState[\"NOT_STARTED\"] = 1] = \"NOT_STARTED\";\n  Html5QrcodeScannerState[Html5QrcodeScannerState[\"SCANNING\"] = 2] = \"SCANNING\";\n  Html5QrcodeScannerState[Html5QrcodeScannerState[\"PAUSED\"] = 3] = \"PAUSED\";\n})(Html5QrcodeScannerState || (Html5QrcodeScannerState = {}));\nvar StateManagerImpl = function () {\n  function StateManagerImpl() {\n    this.state = Html5QrcodeScannerState.NOT_STARTED;\n    this.onGoingTransactionNewState = Html5QrcodeScannerState.UNKNOWN;\n  }\n  StateManagerImpl.prototype.directTransition = function (newState) {\n    this.failIfTransitionOngoing();\n    this.validateTransition(newState);\n    this.state = newState;\n  };\n  StateManagerImpl.prototype.startTransition = function (newState) {\n    this.failIfTransitionOngoing();\n    this.validateTransition(newState);\n    this.onGoingTransactionNewState = newState;\n    return this;\n  };\n  StateManagerImpl.prototype.execute = function () {\n    if (this.onGoingTransactionNewState === Html5QrcodeScannerState.UNKNOWN) {\n      throw \"Transaction is already cancelled, cannot execute().\";\n    }\n    var tempNewState = this.onGoingTransactionNewState;\n    this.onGoingTransactionNewState = Html5QrcodeScannerState.UNKNOWN;\n    this.directTransition(tempNewState);\n  };\n  StateManagerImpl.prototype.cancel = function () {\n    if (this.onGoingTransactionNewState === Html5QrcodeScannerState.UNKNOWN) {\n      throw \"Transaction is already cancelled, cannot cancel().\";\n    }\n    this.onGoingTransactionNewState = Html5QrcodeScannerState.UNKNOWN;\n  };\n  StateManagerImpl.prototype.getState = function () {\n    return this.state;\n  };\n  StateManagerImpl.prototype.failIfTransitionOngoing = function () {\n    if (this.onGoingTransactionNewState !== Html5QrcodeScannerState.UNKNOWN) {\n      throw \"Cannot transition to a new state, already under transition\";\n    }\n  };\n  StateManagerImpl.prototype.validateTransition = function (newState) {\n    switch (this.state) {\n      case Html5QrcodeScannerState.UNKNOWN:\n        throw \"Transition from unknown is not allowed\";\n      case Html5QrcodeScannerState.NOT_STARTED:\n        this.failIfNewStateIs(newState, [Html5QrcodeScannerState.PAUSED]);\n        break;\n      case Html5QrcodeScannerState.SCANNING:\n        break;\n      case Html5QrcodeScannerState.PAUSED:\n        break;\n    }\n  };\n  StateManagerImpl.prototype.failIfNewStateIs = function (newState, disallowedStatesToTransition) {\n    for (var _i = 0, disallowedStatesToTransition_1 = disallowedStatesToTransition; _i < disallowedStatesToTransition_1.length; _i++) {\n      var disallowedState = disallowedStatesToTransition_1[_i];\n      if (newState === disallowedState) {\n        throw \"Cannot transition from \" + this.state + \" to \" + newState;\n      }\n    }\n  };\n  return StateManagerImpl;\n}();\nvar StateManagerProxy = function () {\n  function StateManagerProxy(stateManager) {\n    this.stateManager = stateManager;\n  }\n  StateManagerProxy.prototype.startTransition = function (newState) {\n    return this.stateManager.startTransition(newState);\n  };\n  StateManagerProxy.prototype.directTransition = function (newState) {\n    this.stateManager.directTransition(newState);\n  };\n  StateManagerProxy.prototype.getState = function () {\n    return this.stateManager.getState();\n  };\n  StateManagerProxy.prototype.canScanFile = function () {\n    return this.stateManager.getState() === Html5QrcodeScannerState.NOT_STARTED;\n  };\n  StateManagerProxy.prototype.isScanning = function () {\n    return this.stateManager.getState() !== Html5QrcodeScannerState.NOT_STARTED;\n  };\n  StateManagerProxy.prototype.isStrictlyScanning = function () {\n    return this.stateManager.getState() === Html5QrcodeScannerState.SCANNING;\n  };\n  StateManagerProxy.prototype.isPaused = function () {\n    return this.stateManager.getState() === Html5QrcodeScannerState.PAUSED;\n  };\n  return StateManagerProxy;\n}();\nexport { StateManagerProxy };\nvar StateManagerFactory = function () {\n  function StateManagerFactory() {}\n  StateManagerFactory.create = function () {\n    return new StateManagerProxy(new StateManagerImpl());\n  };\n  return StateManagerFactory;\n}();\nexport { StateManagerFactory };","map":{"version":3,"mappings":"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","names":["Html5QrcodeScannerState","NOT_STARTED","UNKNOWN","StateManagerImpl","newState","failIfTransitionOngoing","validateTransition","state","onGoingTransactionNewState","tempNewState","directTransition","failIfNewStateIs","PAUSED","SCANNING","disallowedStatesToTransition","disallowedStatesToTransition_1","_i","disallowedState","stateManager","StateManagerProxy","startTransition","getState","StateManagerFactory"],"sourceRoot":"","sources":["../../src/state-manager.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}